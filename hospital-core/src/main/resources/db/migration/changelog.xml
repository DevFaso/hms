<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
        https://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-latest.xsd">

    <!-- =================================================================
         V1: Complete schema â€” all 10 schemas + 153 tables
         Generated from Hibernate entity model to ensure 1:1 alignment
         ================================================================= -->
    <changeSet id="V1-initial-schema" author="hms-team" runOnChange="false">
        <sqlFile path="V1__Initial_Schema.sql"
                 relativeToChangelogFile="true"
                 splitStatements="true"
                 stripComments="true"/>
    </changeSet>

    <!-- =================================================================
         V1.1: Unique constraints omitted by Hibernate SchemaExport
         Required before V2 (ON CONFLICT (code) needs unique index)
         ================================================================= -->
    <changeSet id="V1.1-add-unique-constraints" author="hms-team" runOnChange="false">
        <sqlFile path="V1_1__add_unique_constraints.sql"
                 relativeToChangelogFile="true"
                 splitStatements="true"
                 stripComments="true"/>
    </changeSet>

    <!-- =================================================================
         V2: Seed 24 role codes (reference data required at bootstrap)
         ================================================================= -->
    <changeSet id="V2-seed-roles" author="hms-team" runOnChange="false">
        <sqlFile path="V2__seed_roles.sql"
                 relativeToChangelogFile="true"
                 splitStatements="true"
                 stripComments="false"/>
    </changeSet>

    <!-- =================================================================
         V3: Seed DEFAULT_ORG + 6 security policies + security rules
         ================================================================= -->
    <changeSet id="V3-seed-default-org-security" author="hms-team" runOnChange="false">
        <sqlFile path="V3__seed_default_organization_security.sql"
                 relativeToChangelogFile="true"
                 splitStatements="true"
                 stripComments="false"/>
    </changeSet>

</databaseChangeLog>
