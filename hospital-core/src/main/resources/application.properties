# ===================== App & Web =====================
spring.application.name=hms
server.servlet.context-path=/api

# Active profile (override with SPRING_PROFILES_ACTIVE)
spring.profiles.active=${SPRING_PROFILES_ACTIVE:local-h2}

# ===================== i18n =====================
spring.messages.basename=messages
spring.messages.always-use-message-format=true
spring.messages.use-code-as-default-message=true
spring.messages.encoding=UTF-8

# ===================== Jackson =====================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=UTC

# ===================== JPA / Hibernate =====================
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.time_zone=UTC
spring.liquibase.change-log=classpath:db/migration/changelog.xml

# ===================== OpenAPI =====================
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html

# ===================== Logging =====================
logging.level.root=INFO
logging.level.com.example.hms=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} %5p [%t] %-40.40logger{39} - %msg%n

# ===================== JWT =====================
app.jwt.secret=${JWT_SECRET:dev-secret-change-me-in-production-minimum-256-bits-long!!}
app.jwt.access-token-expiration-ms=${JWT_ACCESS_MS:86400000}
app.jwt.refresh-token-expiration-ms=${JWT_REFRESH_MS:172800000}

# ===================== Mail (env-driven) =====================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${MAIL_USER:}
spring.mail.password=${MAIL_PASS:}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
management.health.mail.enabled=${MAIL_HEALTH_ENABLED:false}

# ===================== Actuator =====================
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always
management.endpoint.health.probes.add-additional-paths=true

# ===================== File Upload =====================
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
app.upload.dir=uploads
app.backend.base-url=${BACKEND_BASE_URL:http://localhost:8081}

# ===================== CORS =====================
app.cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:4200}

# ===================== Connection Pool =====================
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.connection-timeout=30000

# ===================== Kafka Topics =====================
app.kafka.chat-topic=${KAFKA_CHAT_TOPIC:hms.chat}
app.kafka.empi-identity-topic=${KAFKA_EMPI_TOPIC:hms.empi.identity}
app.kafka.patient-movement-topic=${KAFKA_PATIENT_MOVEMENT_TOPIC:hms.patient.movement}
app.kafka.platform-registry-topic=${KAFKA_PLATFORM_REGISTRY_TOPIC:hms.platform.registry}
app.kafka.enabled=${KAFKA_ENABLED:false}
